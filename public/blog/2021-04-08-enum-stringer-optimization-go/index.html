<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>Enum Stringer Interface optimisation in Go | Francis Sunday</title>
  
  <meta name="description" content="A tip on how to optimise enum stringer interface">
  
  
  <meta property="og:title" content="Enum Stringer Interface optimisation in Go | Francis Sunday"/>
  <meta property="og:description" content="A tip on how to optimise enum stringer interface">
  <meta property="og:type" content="article"/>
  <meta property="og:url" content="https://codehakase.com/blog/2021-04-08-enum-stringer-optimization-go/"/>
  
  
  <meta name="twitter:title" content="Enum Stringer Interface optimisation in Go | Francis Sunday"/>
  <meta name="twitter:description" content="A tip on how to optimise enum stringer interface">
  
  <meta name="twitter:creator" property="twitter:creator" content="@codehakase"/>
  
  
  
  <link href="https://fonts.googleapis.com/css?family=Roboto|Anonymous+Pro" rel="stylesheet">
  <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
  <link rel="stylesheet" href="https://codehakase.com/css/main.css">
  
  <style>
    body {
      font-family: "Anonymous Pro", monospace;
      font-size: 1.1em;
      line-height: 2;
    }
  </style>
  
  
  </head> 
  <body class="font-mono">
    <div class="max-w-3xl mx-auto p-4">
      <header class="flex flex-col md:flex-row justify-between items-center py-8">
  <div>
    <h1 class="text-4xl md:text-5xl font-bold">
      <a href="https://codehakase.com/">Francis Sunday</a>
    </h1>
  </div>
  
  <nav class="mt-4 md:mt-0">
    <ul class="flex space-x-4 text-base">
      <li>
        <a href="/" class="underline font-bold">/home</a>
      </li>
      <li>
        <a href="/blog/" class="underline font-bold">/posts</a>
      </li>
      <li>
        <a href="/archive/" class="underline font-bold">/archive</a>
      </li>
      <li>
        <a href="/tags/" class="underline font-bold">/tags</a>
      </li>
      <li>
        <a href="/2025" class="underline font-bold">/2025</a>
      </li>
    </ul>
  </nav>
</header> 
      
      <main>
        
<article class="mb-8">
  <header class="mb-8">
    <h1 class="text-3xl font-bold mb-2">Enum Stringer Interface optimisation in Go</h1>
    <div class="text-sm">April 8, 2021</div>
  </header>

  

  <div class="prose max-w-none content-body">
    <p>The most idiomatic way of describing an enum type in Go is to use constants, often in conjunction with <a href="https://golang.org/ref/spec#Iota">iota</a>.</p>
<p>A pattern I&rsquo;ve used to implement the <code>Stringer</code> interface for an enum type is to
lookup the string representation in a slice. Consider this snippet from a
project I&rsquo;m working on:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="font-style:italic">// Status ...</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">type</span> Status <span style="">uint32</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// List of possible status values</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">const</span> (
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// The operation is known, but hasn&#39;t been decided yet</span>
</span></span><span style="display:flex;"><span>	Processing Status = <span style="font-weight:bold">iota</span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// The operation will never be accepted</span>
</span></span><span style="display:flex;"><span>	Rejected
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// The operation was accepted</span>
</span></span><span style="display:flex;"><span>	Accepted
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> (s Status) String() <span style="">string</span> {
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">return</span> []<span style="">string</span>{<span style="font-style:italic">&#34;processing&#34;</span>, <span style="font-style:italic">&#34;rejected&#34;</span>, <span style="font-style:italic">&#34;accepted&#34;</span>}[s]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The snippet above works correct but has a few glitches &ndash; passing
<code>Status(-2)</code> or <code>Status(300)</code>  will cause the <code>String()</code> method to panic, and
when appending to the slice, the order of the enum constants has to be taken
into consideration.</p>
<p>A way to optimise this is to use a map which provides <code>O(1)</code> access time rather
than the linear <code>O(n)</code> time in the string slice version.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="font-style:italic">// Map of Status values back to their constant names for pretty printing.</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">var</span> txStatuses = <span style="font-weight:bold">map</span>[Status]<span style="">string</span>{
</span></span><span style="display:flex;"><span>	Processing: <span style="font-style:italic">&#34;processing&#34;</span>,
</span></span><span style="display:flex;"><span>	Rejected:   <span style="font-style:italic">&#34;rejected&#34;</span>,
</span></span><span style="display:flex;"><span>	Accepted:   <span style="font-style:italic">&#34;accepted&#34;</span>,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// String returns the ErrorCode as a human-readable name.</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> (s Status) String() <span style="">string</span> {
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">if</span> s := txStatuses[s]; s != <span style="font-style:italic">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">return</span> s
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">return</span> fmt.Sprintf(<span style="font-style:italic">&#34;Unknown Status (%d)&#34;</span>, uint32(s))
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
  </div>

  
  <div class="mt-8 pt-4 border-t border-gray-200">
    <h3 class="text-lg font-bold mb-2">Tags:</h3>
    <div class="flex flex-wrap">
      
        <a href="/tags/golang" class="tag">golang</a>
      
        <a href="/tags/go" class="tag">go</a>
      
    </div>
  </div>
  
</article>

      </main>
      
      <footer class="mt-8 pt-8">
  <div class="flex flex-wrap justify-between items-center">
    <div class="font-bold">
      <a class="underline" href="https://x.com/codehakase">/@codehakase</a>
      <a class="underline" href="https://linkedin.com/in/codehakase">/linkedin</a>
      <a class="underline" href="https://github.com/codehakase">/github</a>
    </div>
    <div class="mt-4 md:mt-0 text-sm">
      &copy; 2025 Francis Sunday
    </div>
  </div>
</footer> 
    </div>
  </body>
</html> 