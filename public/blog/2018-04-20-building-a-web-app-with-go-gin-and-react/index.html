<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>Building a Web App With Go, Gin and React | Francis Sunday</title>
  
  <meta name="description" content="In this tutorial, I&#39;ll show you how easy it is to build a web application with Go and the Gin framework and add authentication to it.">
  
  
  <meta property="og:title" content="Building a Web App With Go, Gin and React | Francis Sunday"/>
  <meta property="og:description" content="In this tutorial, I&#39;ll show you how easy it is to build a web application with Go and the Gin framework and add authentication to it.">
  <meta property="og:type" content="article"/>
  <meta property="og:url" content="http://localhost:1313/blog/2018-04-20-building-a-web-app-with-go-gin-and-react/"/>
  
  
  <meta name="twitter:title" content="Building a Web App With Go, Gin and React | Francis Sunday"/>
  <meta name="twitter:description" content="In this tutorial, I&#39;ll show you how easy it is to build a web application with Go and the Gin framework and add authentication to it.">
  
  <meta name="twitter:creator" property="twitter:creator" content="@codehakase"/>
  
  
  
  <link href="https://fonts.googleapis.com/css?family=Roboto|Anonymous+Pro" rel="stylesheet">
  <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
  <link rel="stylesheet" href="http://localhost:1313/css/main.css">
  
  <style>
    body {
      font-family: "Anonymous Pro", monospace;
      font-size: 1.1em;
      line-height: 2;
    }
  </style>
  
  
  </head> 
  <body class="font-mono">
    <div class="max-w-3xl mx-auto p-4">
      <header class="flex flex-col md:flex-row justify-between items-center py-8">
  <div>
    <h1 class="text-4xl md:text-5xl font-bold">
      <a href="http://localhost:1313/">Francis Sunday</a>
    </h1>
  </div>
  
  <nav class="mt-4 md:mt-0">
    <ul class="flex space-x-4">
      <li>
        <a href="/about/" class="hover:underline font-bold">About</a>
      </li>
      <li>
        <a href="/blog/" class="hover:underline font-bold">Blog</a>
      </li>
      <li>
        <a href="/archive/" class="hover:underline font-bold">Archive</a>
      </li>
      <li>
        <a href="/tags/" class="hover:underline font-bold">Tags</a>
      </li>
    </ul>
  </nav>
</header> 
      
      <main>
        
<article class="mb-8">
  <header class="mb-8">
    <h1 class="text-3xl font-bold mb-2">Building a Web App With Go, Gin and React</h1>
    <div class="text-sm">April 20, 2018</div>
  </header>

  
  <div class="toc">
    <h5 class="toc-title font-semibold">Jump to:</h5>
    <div class="toc-content">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#gin-features">Gin Features</a></li>
    <li><a href="#prerequisites">Prerequisites</a></li>
    <li><a href="#building-an-app-with-gin">Building An App With Gin</a>
      <ul>
        <li><a href="#ready-set-go">Ready, Set, Go</a></li>
        <li><a href="#defining-the-api">Defining The API</a></li>
        <li><a href="#jokes-data">Jokes Data</a></li>
        <li><a href="#building-the-ui-react">Building the UI (React)</a></li>
        <li><a href="#setup">Setup</a></li>
        <li><a href="#building-our-components">Building our Components</a></li>
        <li><a href="#the-app-component">The App component</a></li>
        <li><a href="#the-home-component">The Home component</a></li>
        <li><a href="#loggedin-component">LoggedIn component</a></li>
        <li><a href="#the-joke-component">The Joke component</a></li>
      </ul>
    </li>
    <li><a href="#securing-our-jokes-app-with-auth0">Securing our Jokes App With Auth0</a>
      <ul>
        <li><a href="#creating-the-api-client">Creating the API client</a></li>
        <li><a href="#securing-our-api-endpoints">Securing our API Endpoints</a></li>
        <li><a href="#using-the-jwt-middleware">Using the JWT Middleware</a></li>
        <li><a href="#login-with-auth0-and-react">Login with Auth0 and React</a></li>
        <li><a href="#putting-it-all-together">Putting it all together</a></li>
        <li><a href="#conclusion">Conclusion</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
  </div>
  

  <div class="prose max-w-none content-body">
    <p><strong>TL;DR:</strong> In this tutorial, I&rsquo;ll show you how easy it is to build a web application with Go and the Gin framework and add authentication to it. Check out the Github <a href="https://github.com/codehakase/golang-gin">repo</a> for the code we&rsquo;re going to write.</p>
<hr>
<p><strong>Gin</strong> is a high-performance micro-framework that delivers a very minimalistic framework that carries with it only the most essential features, libraries, and functionalities needed to build web applications and microservices. It makes it simple to build a request handling pipeline from modular, reusable pieces. It does this by allowing you to write middleware that can be plugged into one or more request handlers or groups of request handlers.</p>
<h2 id="gin-features">Gin Features</h2>
<p>Gin is a fast, simple yet fully featured and very efficient web framework for Go. Check out some of the features below that makes it a worthy framework to consider for your next Golang project.</p>
<ul>
<li><strong>Speed:</strong> Gin is built for speed. The framework offers a Radix tree based routing, small memory foot print. No reflection. Predictable API performance.</li>
<li><strong>Crash-Free</strong>:  Gin has the capability of catching crashes or panics during runtime, and can recover from it, this way your application will be always available.</li>
<li><strong>Routing:</strong> Gin provides a routing interface to allow you express how your web application or API routes should look.</li>
<li><strong>JSON Validation:</strong> Gin can parse and validate the JSON requests easily, checking for the existence of required values.</li>
<li><strong>Error Management:</strong> Gin provides a convenient way to collect all the errors occurred during a HTTP request. Eventually, a middleware can write them to a log file, to a database and send them through the network.</li>
<li><strong>Built-In Rendering:</strong> Gin provides an easy to use API for JSON, XML, and HTML rendering.</li>
</ul>
<h2 id="prerequisites">Prerequisites</h2>
<p>To follow along with this tutorial, you&rsquo;ll need to have Go installed on your machine, a web browser to view the app, and a command line to execute build commands.</p>
<p><strong>Go</strong> or as its normally called; <em>&ldquo;Golang&rdquo;</em>, is a programming language developed by Google for building modern software. Go is a language designed to get stuff done efficiently and fast. The key benefits of Go include:</p>
<ul>
<li>Strongly typed and garbage collected</li>
<li>Blazing fast compile times</li>
<li>Concurrency built in</li>
<li>Extensive standard library</li>
</ul>
<p>Head over to the <a href="https://golang.org/dl/">downloads section</a> of the Go website, to get Go running on your machine.</p>
<h2 id="building-an-app-with-gin">Building An App With Gin</h2>
<p>We&rsquo;ll be building a simple joke listing app with <strong>Gin</strong>. Our app will simply list some silly dad jokes. We are going to add authentication to it, all logged-in users will have the privilege to like and view jokes.</p>
<p>This will allow us illustrate how <strong>Gin</strong> can be used to develop web applications, and/or APIs.</p>
<p><img src="https://user-images.githubusercontent.com/9336187/38371873-6ccabb50-38e5-11e8-9b67-b97cc2ce98c6.png" alt="golang-gin-demo-shot"></p>
<p>We&rsquo;ll be making use of the following functionalities offered by Gin:</p>
<ul>
<li>Middleware</li>
<li>Routing</li>
<li>Routes Grouping</li>
</ul>
<h3 id="ready-set-go">Ready, Set, Go</h3>
<p>We will write our entire Go application in a <code>main.go</code> file. Since its a small application, its going to be easy to build the application with just  <code>go run</code> from the terminal.</p>
<p>We&rsquo;ll create a new directory <code>golang-gin</code> in our Go workspace, and then a <code>main.go</code> file in it:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ mkdir -p $GOPATH/src/github.com/user/golang-gin
</span></span><span style="display:flex;"><span>$ cd $GOPATH/src/github.com/user/golang-gin
</span></span><span style="display:flex;"><span>$ touch main.go
</span></span></code></pre></div><p>The content of the <code>main.go</code> file:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="font-weight:bold">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">import</span> (
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">&#34;net/http&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">&#34;github.com/gin-gonic/contrib/static&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> main() {
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// Set the router as the default one shipped with Gin</span>
</span></span><span style="display:flex;"><span>  router := gin.Default()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// Serve frontend static files</span>
</span></span><span style="display:flex;"><span>  router.Use(static.Serve(<span style="font-style:italic">&#34;/&#34;</span>, static.LocalFile(<span style="font-style:italic">&#34;./views&#34;</span>, <span style="font-weight:bold">true</span>)))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// Setup route group for the API</span>
</span></span><span style="display:flex;"><span>  api := router.Group(<span style="font-style:italic">&#34;/api&#34;</span>)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    api.GET(<span style="font-style:italic">&#34;/&#34;</span>, <span style="font-weight:bold">func</span>(c *gin.Context) {
</span></span><span style="display:flex;"><span>      c.JSON(http.StatusOK, gin.H {
</span></span><span style="display:flex;"><span>        <span style="font-style:italic">&#34;message&#34;</span>: <span style="font-style:italic">&#34;pong&#34;</span>,
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// Start and run the server</span>
</span></span><span style="display:flex;"><span>  router.Run(<span style="font-style:italic">&#34;:3000&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We&rsquo;ll need to create some more directories for our static files. In the same directory as the <code>main.go</code> file, let&rsquo;s create a <code>views</code> folder. In the <code>views</code> folder, create a <code>js</code> folder and an <code>index.html</code> file in it.</p>
<p>The <code>index.html</code> file will be very simple for now:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">html</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">head</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">title</span>&gt;Jokeish App&lt;/<span style="font-weight:bold">title</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">head</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">body</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">h1</span>&gt;Welcome to the Jokeish App&lt;/<span style="font-weight:bold">h1</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">html</span>&gt;
</span></span></code></pre></div><p>Before we test what we have to far, let&rsquo;s install the added dependencies:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ go get -u github.com/gin-gonic/gin
</span></span><span style="display:flex;"><span>$ go get -u github.com/gin-gonic/contrib/static
</span></span></code></pre></div><p>To see what&rsquo;s working, we&rsquo;ll need to start our server by running <code>go run main.go</code>.</p>
<p><img src="https://user-images.githubusercontent.com/9336187/38358547-700bc822-38bd-11e8-88a6-246559fbe57f.png" alt="go-gin-gorun-1"></p>
<p>Once the application is running, navigate to <code>http://localhost:3000</code> in your browser. If all went well, you should see level 1 header text <strong>Welcome to the Jokeish App</strong> displayed.</p>
<p><img src="https://user-images.githubusercontent.com/9336187/38385072-cdaa2168-3908-11e8-9889-e9c1e713ce0a.png" alt="golang-welcome-de"></p>
<h3 id="defining-the-api">Defining The API</h3>
<p>Let&rsquo;s add some more code in our <code>main.go</code> file, for our API definitions. We&rsquo;ll update our <code>main</code> function with two routes <code>/jokes/</code> and <code>/jokes/like/:jokeID</code>, to the route group <code>/api/</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="font-weight:bold">func</span> main() {
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// ... leave the code above untouched...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// Our API will consit of just two routes</span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// /jokes - which will retrieve a list of jokes a user can see</span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// /jokes/like/:jokeID - which will capture likes sent to a particular joke</span>
</span></span><span style="display:flex;"><span>  api.GET(<span style="font-style:italic">&#34;/jokes&#34;</span>, JokeHandler)
</span></span><span style="display:flex;"><span>  api.POST(<span style="font-style:italic">&#34;/jokes/like/:jokeID&#34;</span>, LikeJoke)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// JokeHandler retrieves a list of available jokes</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> JokeHandler(c *gin.Context) {
</span></span><span style="display:flex;"><span>  c.Header(<span style="font-style:italic">&#34;Content-Type&#34;</span>, <span style="font-style:italic">&#34;application/json&#34;</span>)
</span></span><span style="display:flex;"><span>  c.JSON(http.StatusOK, gin.H {
</span></span><span style="display:flex;"><span>    <span style="font-style:italic">&#34;message&#34;</span>:<span style="font-style:italic">&#34;Jokes handler not implemented yet&#34;</span>,
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// LikeJoke increments the likes of a particular joke Item</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> LikeJoke(c *gin.Context) {
</span></span><span style="display:flex;"><span>  c.Header(<span style="font-style:italic">&#34;Content-Type&#34;</span>, <span style="font-style:italic">&#34;application/json&#34;</span>)
</span></span><span style="display:flex;"><span>  c.JSON(http.StatusOK, gin.H {
</span></span><span style="display:flex;"><span>    <span style="font-style:italic">&#34;message&#34;</span>:<span style="font-style:italic">&#34;LikeJoke handler not implemented yet&#34;</span>,
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The content of the <code>main.go</code> file, should look like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="font-weight:bold">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">import</span> (
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">&#34;net/http&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">&#34;github.com/gin-gonic/contrib/static&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> main() {
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// Set the router as the default one shipped with Gin</span>
</span></span><span style="display:flex;"><span>  router := gin.Default()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// Serve frontend static files</span>
</span></span><span style="display:flex;"><span>  router.Use(static.Serve(<span style="font-style:italic">&#34;/&#34;</span>, static.LocalFile(<span style="font-style:italic">&#34;./views&#34;</span>, <span style="font-weight:bold">true</span>)))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// Setup route group for the API</span>
</span></span><span style="display:flex;"><span>  api := router.Group(<span style="font-style:italic">&#34;/api&#34;</span>)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    api.GET(<span style="font-style:italic">&#34;/&#34;</span>, <span style="font-weight:bold">func</span>(c *gin.Context) {
</span></span><span style="display:flex;"><span>      c.JSON(http.StatusOK, gin.H {
</span></span><span style="display:flex;"><span>        <span style="font-style:italic">&#34;message&#34;</span>: <span style="font-style:italic">&#34;pong&#34;</span>,
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// Our API will consit of just two routes</span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// /jokes - which will retrieve a list of jokes a user can see</span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// /jokes/like/:jokeID - which will capture likes sent to a particular joke</span>
</span></span><span style="display:flex;"><span>  api.GET(<span style="font-style:italic">&#34;/jokes&#34;</span>, JokeHandler)
</span></span><span style="display:flex;"><span>  api.POST(<span style="font-style:italic">&#34;/jokes/like/:jokeID&#34;</span>, LikeJoke)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// Start and run the server</span>
</span></span><span style="display:flex;"><span>  router.Run(<span style="font-style:italic">&#34;:3000&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// JokeHandler retrieves a list of available jokes</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> JokeHandler(c *gin.Context) {
</span></span><span style="display:flex;"><span>  c.Header(<span style="font-style:italic">&#34;Content-Type&#34;</span>, <span style="font-style:italic">&#34;application/json&#34;</span>)
</span></span><span style="display:flex;"><span>  c.JSON(http.StatusOK, gin.H {
</span></span><span style="display:flex;"><span>    <span style="font-style:italic">&#34;message&#34;</span>:<span style="font-style:italic">&#34;Jokes handler not implemented yet&#34;</span>,
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// LikeJoke increments the likes of a particular joke Item</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> LikeJoke(c *gin.Context) {
</span></span><span style="display:flex;"><span>  c.Header(<span style="font-style:italic">&#34;Content-Type&#34;</span>, <span style="font-style:italic">&#34;application/json&#34;</span>)
</span></span><span style="display:flex;"><span>  c.JSON(http.StatusOK, gin.H {
</span></span><span style="display:flex;"><span>    <span style="font-style:italic">&#34;message&#34;</span>:<span style="font-style:italic">&#34;LikeJoke handler not implemented yet&#34;</span>,
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Let&rsquo;s run our app again <code>go run main.go</code>, and access our routes; <code>http://localhost:3000/api/jokes</code> will return a <code>200 OK</code> header response, with message <code>jokes handler not implemented yet</code>, and a POST request to <code>http://localhost:3000/api/jokes/like/1</code> returns a <code>200 OK</code> header, and message <code>Likejoke handler not implemented yet</code>.</p>
<h3 id="jokes-data">Jokes Data</h3>
<p>Since we already have our routes definition set, which does only one thing, which is to return a json response, we&rsquo;ll spice our codebase a bit by adding some more code to it.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="font-style:italic">// ... leave the code above untouched...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// Let&#39;s create our Jokes struct. This will contain information about a Joke</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// Joke contains information about a single Joke</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">type</span> Joke <span style="font-weight:bold">struct</span> {
</span></span><span style="display:flex;"><span>  ID     <span style="">int</span>     <span style="font-style:italic">`json:&#34;id&#34; binding:&#34;required&#34;`</span>
</span></span><span style="display:flex;"><span>  Likes  <span style="">int</span>     <span style="font-style:italic">`json:&#34;likes&#34;`</span>
</span></span><span style="display:flex;"><span>  Joke   <span style="">string</span>  <span style="font-style:italic">`json:&#34;joke&#34; binding:&#34;required&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// We&#39;ll create a list of jokes</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">var</span> jokes = []Joke{
</span></span><span style="display:flex;"><span>  Joke{1, 0, <span style="font-style:italic">&#34;Did you hear about the restaurant on the moon? Great food, no atmosphere.&#34;</span>},
</span></span><span style="display:flex;"><span>  Joke{2, 0, <span style="font-style:italic">&#34;What do you call a fake noodle? An Impasta.&#34;</span>},
</span></span><span style="display:flex;"><span>  Joke{3, 0, <span style="font-style:italic">&#34;How many apples grow on a tree? All of them.&#34;</span>},
</span></span><span style="display:flex;"><span>  Joke{4, 0, <span style="font-style:italic">&#34;Want to hear a joke about paper? Nevermind it&#39;s tearable.&#34;</span>},
</span></span><span style="display:flex;"><span>  Joke{5, 0, <span style="font-style:italic">&#34;I just watched a program about beavers. It was the best dam program I&#39;ve ever seen.&#34;</span>},
</span></span><span style="display:flex;"><span>  Joke{6, 0, <span style="font-style:italic">&#34;Why did the coffee file a police report? It got mugged.&#34;</span>},
</span></span><span style="display:flex;"><span>  Joke{7, 0, <span style="font-style:italic">&#34;How does a penguin build it&#39;s house? Igloos it together.&#34;</span>},
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> main() {
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// ... leave this block untouched...</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// JokeHandler retrieves a list of available jokes</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> JokeHandler(c *gin.Context) {
</span></span><span style="display:flex;"><span>  c.Header(<span style="font-style:italic">&#34;Content-Type&#34;</span>, <span style="font-style:italic">&#34;application/json&#34;</span>)
</span></span><span style="display:flex;"><span>  c.JSON(http.StatusOK, jokes)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// LikeJoke increments the likes of a particular joke Item</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> LikeJoke(c *gin.Context) {
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// confirm Joke ID sent is valid</span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// remember to import the `strconv` package</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">if</span> jokeid, err := strconv.Atoi(c.Param(<span style="font-style:italic">&#34;jokeID&#34;</span>)); err == <span style="font-weight:bold">nil</span> {
</span></span><span style="display:flex;"><span>    <span style="font-style:italic">// find joke, and increment likes</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">for</span> i := 0; i &lt; len(jokes); i++ {
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">if</span> jokes[i].ID == jokeid {
</span></span><span style="display:flex;"><span>        jokes[i].Likes += 1
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-style:italic">// return a pointer to the updated jokes list</span>
</span></span><span style="display:flex;"><span>    c.JSON(http.StatusOK, &amp;jokes)
</span></span><span style="display:flex;"><span>  } <span style="font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>    <span style="font-style:italic">// Joke ID is invalid</span>
</span></span><span style="display:flex;"><span>    c.AbortWithStatus(http.StatusNotFound)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// NB: Replace the JokeHandler and LikeJoke functions in the previous version to the ones above</span>
</span></span></code></pre></div><p>With our code looking good, lets go ahead and test our API. We can test with <code>cURL</code> or <code>postman</code> , and sending a <code>GET</code> request to <code>http://localhost:3000/jokes</code> to get the full list of jokes, and a <code>POST</code> request to <code>http://localhost:3000/jokes/like/{jokeid}</code> to increment the likes of a joke.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl http://localhost:3000/api/jokes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ curl -X POST http://localhost:3000/api/jokes/like/4
</span></span></code></pre></div><h3 id="building-the-ui-react">Building the UI (React)</h3>
<p>We have our API in place, so let&rsquo;s build a frontend to present the data from our API. For this, we&rsquo;ll be using React. We won&rsquo;t go too deep into React as it will be out of scope for this tutorial. If you need to learn more about React, checkout the official <a href="https://facebook.github.io/react/docs/tutorial.html">tutorial</a>. You can implement the UI with any frontend framework you&rsquo;re comfortable with.</p>
<h3 id="setup">Setup</h3>
<p>We&rsquo;ll edit the <code>index.html</code> file to add external libraries needed to run React, we&rsquo;ll then need to create an<code>app.jsx</code> file in the <code>views/js</code> directory, which will contain our React code.</p>
<p>Our <code>index.html</code> file should look like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">html</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">head</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">meta</span> charset=<span style="font-style:italic">&#34;UTF-8&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">meta</span> name=<span style="font-style:italic">&#34;viewport&#34;</span> content=<span style="font-style:italic">&#34;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">title</span>&gt;Jokeish App&lt;/<span style="font-weight:bold">title</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">script</span> src=<span style="font-style:italic">&#34;http://code.jquery.com/jquery-2.1.4.min.js&#34;</span>&gt;&lt;/<span style="font-weight:bold">script</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">script</span> src=<span style="font-style:italic">&#34;https://cdn.auth0.com/js/auth0/9.0/auth0.min.js&#34;</span>&gt;&lt;/<span style="font-weight:bold">script</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">script</span> type=<span style="font-style:italic">&#34;application/javascript&#34;</span> src=<span style="font-style:italic">&#34;https://unpkg.com/react@16.0.0/umd/react.production.min.js&#34;</span>&gt;&lt;/<span style="font-weight:bold">script</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">script</span> type=<span style="font-style:italic">&#34;application/javascript&#34;</span> src=<span style="font-style:italic">&#34;https://unpkg.com/react-dom@16.0.0/umd/react-dom.production.min.js&#34;</span>&gt;&lt;/<span style="font-weight:bold">script</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">script</span> type=<span style="font-style:italic">&#34;application/javascript&#34;</span> src=<span style="font-style:italic">&#34;https://unpkg.com/babel-standalone@6.26.0/babel.js&#34;</span>&gt;&lt;/<span style="font-weight:bold">script</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">script</span> type=<span style="font-style:italic">&#34;text/babel&#34;</span> src=<span style="font-style:italic">&#34;js/app.jsx&#34;</span>&gt;&lt;/<span style="font-weight:bold">script</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">link</span> href=<span style="font-style:italic">&#34;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css&#34;</span> rel=<span style="font-style:italic">&#34;stylesheet&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">head</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">body</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">div</span> id=<span style="font-style:italic">&#34;app&#34;</span>&gt;&lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">body</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">html</span>&gt;
</span></span></code></pre></div><h3 id="building-our-components">Building our Components</h3>
<p>In React views are broken down into components. We&rsquo;ll need to build some components. An <code>App</code> component as the main entry, that launches the application, a <code>Home</code> component which will face non logged-in users, a <code>LoggedIn</code> component with content only visible by authenticated users, and a <code>Joke</code> component to display a list of jokes. We&rsquo;ll write all these components in the <code>app.jsx</code> file.</p>
<h3 id="the-app-component">The App component</h3>
<p>This component bootstraps our entire React app. It decides on which component to show when a user is authenticated or not. We&rsquo;ll start off with just its base, and later update it with more functionality.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="font-weight:bold">class</span> App <span style="font-weight:bold">extends</span> React.Component {
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">if</span> (<span style="font-weight:bold">this</span>.loggedIn) {
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">return</span> (&lt;LoggedIn /&gt;);
</span></span><span style="display:flex;"><span>    } <span style="font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">return</span> (&lt;Home /&gt;);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="the-home-component">The Home component</h3>
<p>This component is shown to non logged-in users. And a button which opens a Hosted lock screen (we&rsquo;ll add this functionality later), where they can signup, or login.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="font-weight:bold">class</span> Home <span style="font-weight:bold">extends</span> React.Component {
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>      &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;container&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;col-xs-8 col-xs-offset-2 jumbotron text-center&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">h1</span>&gt;Jokeish&lt;/<span style="font-weight:bold">h1</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">p</span>&gt;A load <span style="font-weight:bold">of</span> Dad jokes XD&lt;/<span style="font-weight:bold">p</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">p</span>&gt;Sign <span style="font-weight:bold">in</span> to get access &lt;/<span style="font-weight:bold">p</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">a</span> onClick={<span style="font-weight:bold">this</span>.authenticate} className=<span style="font-style:italic">&#34;btn btn-primary btn-lg btn-login btn-block&#34;</span>&gt;Sign In&lt;/<span style="font-weight:bold">a</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="loggedin-component">LoggedIn component</h3>
<p>This component is displayed when a user is authenticated. It stores in its <code>state</code> an array of jokes which is populated when the component mounts.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="font-weight:bold">class</span> LoggedIn <span style="font-weight:bold">extends</span> React.Component {
</span></span><span style="display:flex;"><span>  constructor(props) {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">super</span>(props);
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.state = {
</span></span><span style="display:flex;"><span>      jokes: []
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>      &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;container&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;col-lg-12&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">br</span> /&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">span</span> className=<span style="font-style:italic">&#34;pull-right&#34;</span>&gt;&lt;<span style="font-weight:bold">a</span> onClick={<span style="font-weight:bold">this</span>.logout}&gt;Log out&lt;/<span style="font-weight:bold">a</span>&gt;&lt;/<span style="font-weight:bold">span</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">h2</span>&gt;Jokeish&lt;/<span style="font-weight:bold">h2</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">p</span>&gt;Let<span style="">&#39;</span>s feed you <span style="font-weight:bold">with</span> some funny Jokes!!!&lt;/<span style="font-weight:bold">p</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;row&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            {<span style="font-weight:bold">this</span>.state.jokes.map(<span style="font-weight:bold">function</span>(joke, i){
</span></span><span style="display:flex;"><span>              <span style="font-weight:bold">return</span> (&lt;<span style="font-weight:bold">Joke</span> key={i} joke={joke} /&gt;);
</span></span><span style="display:flex;"><span>            })}
</span></span><span style="display:flex;"><span>          &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="the-joke-component">The Joke component</h3>
<p>The <code>Joke</code> component will contain information about each item from the jokes response to be displayed.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="font-weight:bold">class</span> Joke <span style="font-weight:bold">extends</span> React.Component {
</span></span><span style="display:flex;"><span>  constructor(props) {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">super</span>(props);
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.state = {
</span></span><span style="display:flex;"><span>      liked: <span style="font-style:italic">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.like = <span style="font-weight:bold">this</span>.like.bind(<span style="font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  like() {
</span></span><span style="display:flex;"><span>    <span style="font-style:italic">// ... we&#39;ll add this block later
</span></span></span><span style="display:flex;"><span><span style="font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>      &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;col-xs-4&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;panel panel-default&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;panel-heading&#34;</span>&gt;<span style="">#</span>{<span style="font-weight:bold">this</span>.props.joke.id} &lt;<span style="font-weight:bold">span</span> className=<span style="font-style:italic">&#34;pull-right&#34;</span>&gt;{<span style="font-weight:bold">this</span>.state.liked}&lt;/<span style="font-weight:bold">span</span>&gt;&lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;panel-body&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            {<span style="font-weight:bold">this</span>.props.joke.joke}
</span></span><span style="display:flex;"><span>          &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;panel-footer&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            {<span style="font-weight:bold">this</span>.props.joke.likes} Likes &amp;nbsp;
</span></span><span style="display:flex;"><span>            &lt;<span style="font-weight:bold">a</span> onClick={<span style="font-weight:bold">this</span>.like} className=<span style="font-style:italic">&#34;btn btn-default&#34;</span>&gt;
</span></span><span style="display:flex;"><span>              &lt;<span style="font-weight:bold">span</span> className=<span style="font-style:italic">&#34;glyphicon glyphicon-thumbs-up&#34;</span>&gt;&lt;/<span style="font-weight:bold">span</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="font-weight:bold">a</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We&rsquo;ve written our components, now let&rsquo;s tell React where to render the app. We&rsquo;ll add the block of code below to the bottom of our <code>app.jsx</code> file.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>ReactDOM.render(&lt;App /&gt;, document.getElementById(<span style="font-style:italic">&#39;app&#39;</span>));
</span></span></code></pre></div><p>Let&rsquo;s restart our Go server <code>go run main.go</code>, and head over to our app&rsquo;s URL <code>http://localhost:3000/</code>. You&rsquo;d see the <code>Home</code> component is being rendered.</p>
<p><img src="https://user-images.githubusercontent.com/9336187/38368612-a452879a-38dd-11e8-8a63-5cc7530fc9bd.png" alt="golang-gin-home-component"></p>
<h2 id="securing-our-jokes-app-with-auth0">Securing our Jokes App With Auth0</h2>
<blockquote>
<p>Disclaimer: This isn&rsquo;t a sponsored content.</p></blockquote>
<p><strong>Auth0</strong> issues <a href="https://jwt.io/">JSON Web Tokens</a> on every login for your users. This means that you can have a solid <a href="https://auth0.com/docs/identityproviders">identity infrastructure</a>, including <a href="https://auth0.com/docs/sso/single-sign-on">single sign-on</a>, user management, support for social identity providers (Facebook, Github, Twitter, etc.), enterprise identity providers (Active Directory, LDAP, SAML, etc.) and your own database of users with just a few lines of code.</p>
<p>We can easily set up authentication in our GIN app by using Auth0. You&rsquo;ll need an ccount to follow along with this part. If you don&rsquo;t already have an Auth0 account, <a href="https://auth0.com/signup">sign up</a> for one now.</p>
<h3 id="creating-the-api-client">Creating the API client</h3>
<p>Our tokens will be generated with Auth0, so we need to create an API and a Client from our Auth0 dashboard. If you haven&rsquo;t already, <a href="https://auth0.com/signup">sign up</a> for an Auth0 account.</p>
<p>To create a new API, navigate to the <a href="https://manage.auth0.com/#/apis">APIs section</a> in your dashboard, and click the <strong>Create API</strong> button.</p>
<p><img src="https://user-images.githubusercontent.com/9336187/38367092-a7bbfffa-38d9-11e8-949e-04542283606c.png" alt="golang-gin-apis-section"></p>
<p>Choose an API <strong>name</strong>, and an <strong>identifier</strong>. The identifier will be the <strong>audience</strong> for the middleware. The <strong>Signing Algorithm</strong> should be <strong>RS256</strong>.</p>
<p>To create a new Client, navigate to the <a href="">clients section</a> in your dashboard, and click the <strong>Create Client</strong> button, and select type <code>Regular Web Applications</code>.</p>
<p><img src="https://user-images.githubusercontent.com/9336187/38453889-025202bc-3a55-11e8-9ff6-1d5265ebecd9.png" alt="golang-gin-create-client"></p>
<p>Once the client is created, take note of the <code>client_id</code> and <code>client_secret</code>, as we&rsquo;ll need it later.</p>
<p><img src="https://user-images.githubusercontent.com/9336187/38453892-09268fea-3a55-11e8-9c3d-68de4b26295d.png" alt="golang-gin-client-page"></p>
<p>We need to add the credentials needed for our API to an environment vairable. In the root directory, create a new file <code>.env</code> and add the following to it, with the details from the Auth0 dashboard:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span><span style="font-weight:bold">export</span> AUTH0_API_CLIENT_SECRET=<span style="font-style:italic">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">export</span> AUTH0_CLIENT_ID=<span style="font-style:italic">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">export</span> AUTH0_DOMAIN=<span style="font-style:italic">&#34;yourdomain.auth0.com&#34;</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">export</span> AUTH0_API_AUDIENCE=<span style="font-style:italic">&#34;&#34;</span>
</span></span></code></pre></div><h3 id="securing-our-api-endpoints">Securing our API Endpoints</h3>
<p>Currently, our API is open to the world, so we need to secure them, so only authorized users can access them.</p>
<p>We are going to make use of a <strong>JWT Middleware</strong> to check for a valid <em>JSON Web Token</em> from each requests hitting our Endpoints.</p>
<p>Let&rsquo;s create our middleware:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// ...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">var</span> jwtMiddleWare *jwtmiddleware.JWTMiddleware
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> main() {
</span></span><span style="display:flex;"><span>  jwtMiddleware := jwtmiddleware.New(jwtmiddleware.Options{
</span></span><span style="display:flex;"><span>    ValidationKeyGetter: <span style="font-weight:bold">func</span>(token *jwt.Token) (<span style="font-weight:bold">interface</span>{}, <span style="">error</span>) {
</span></span><span style="display:flex;"><span>      aud := os.Getenv(<span style="font-style:italic">&#34;AUTH0_API_AUDIENCE&#34;</span>)
</span></span><span style="display:flex;"><span>      checkAudience := token.Claims.(jwt.MapClaims).VerifyAudience(aud, <span style="font-weight:bold">false</span>)
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">if</span> !checkAudience {
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">return</span> token, errors.New(<span style="font-style:italic">&#34;Invalid audience.&#34;</span>)
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="font-style:italic">// verify iss claim</span>
</span></span><span style="display:flex;"><span>      iss := os.Getenv(<span style="font-style:italic">&#34;AUTH0_DOMAIN&#34;</span>)
</span></span><span style="display:flex;"><span>      checkIss := token.Claims.(jwt.MapClaims).VerifyIssuer(iss, <span style="font-weight:bold">false</span>)
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">if</span> !checkIss {
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">return</span> token, errors.New(<span style="font-style:italic">&#34;Invalid issuer.&#34;</span>)
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      cert, err := getPemCert(token)
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">if</span> err != <span style="font-weight:bold">nil</span> {
</span></span><span style="display:flex;"><span>        log.Fatalf(<span style="font-style:italic">&#34;could not get cert: %+v&#34;</span>, err)
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      result, _ := jwt.ParseRSAPublicKeyFromPEM([]byte(cert))
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">return</span> result, <span style="font-weight:bold">nil</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    SigningMethod: jwt.SigningMethodRS256,
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// register our actual jwtMiddleware</span>
</span></span><span style="display:flex;"><span>  jwtMiddleWare = jwtMiddleware
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// ... the rest of the code below this function doesn&#39;t change yet</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// authMiddleware intercepts the requests, and check for a valid jwt token</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> authMiddleware() gin.HandlerFunc {
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">return</span> <span style="font-weight:bold">func</span>(c *gin.Context) {
</span></span><span style="display:flex;"><span>    <span style="font-style:italic">// Get the client secret key</span>
</span></span><span style="display:flex;"><span>    err := jwtMiddleWare.CheckJWT(c.Writer, c.Request)
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">if</span> err != <span style="font-weight:bold">nil</span> {
</span></span><span style="display:flex;"><span>      <span style="font-style:italic">// Token not found</span>
</span></span><span style="display:flex;"><span>      fmt.Println(err)
</span></span><span style="display:flex;"><span>      c.Abort()
</span></span><span style="display:flex;"><span>      c.Writer.WriteHeader(http.StatusUnauthorized)
</span></span><span style="display:flex;"><span>      c.Writer.Write([]byte(<span style="font-style:italic">&#34;Unauthorized&#34;</span>))
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The above code, we have a new <code>jwtMiddleWare</code> variable which is initialized in the <code>main</code> function, and is used in the <code>authMiddleware</code> middle function. If you notice, we are pulling our server-side credentials from an environment variable (one of the tenets of a <strong>12-factor app</strong>). Our middleware checks and receives a token from a request, it calls the <code>jwtMiddleWare.CheckJWT</code> method to validate the token sent.</p>
<p>Let&rsquo;s also write the function to return the JSON Web Keys:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="font-style:italic">// ... the code above is untouched...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// Jwks stores a slice of JSON Web Keys</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">type</span> Jwks <span style="font-weight:bold">struct</span> {
</span></span><span style="display:flex;"><span>  Keys []JSONWebKeys <span style="font-style:italic">`json:&#34;keys&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">type</span> JSONWebKeys <span style="font-weight:bold">struct</span> {
</span></span><span style="display:flex;"><span>  Kty <span style="">string</span>   <span style="font-style:italic">`json:&#34;kty&#34;`</span>
</span></span><span style="display:flex;"><span>  Kid <span style="">string</span>   <span style="font-style:italic">`json:&#34;kid&#34;`</span>
</span></span><span style="display:flex;"><span>  Use <span style="">string</span>   <span style="font-style:italic">`json:&#34;use&#34;`</span>
</span></span><span style="display:flex;"><span>  N   <span style="">string</span>   <span style="font-style:italic">`json:&#34;n&#34;`</span>
</span></span><span style="display:flex;"><span>  E   <span style="">string</span>   <span style="font-style:italic">`json:&#34;e&#34;`</span>
</span></span><span style="display:flex;"><span>  X5c []<span style="">string</span> <span style="font-style:italic">`json:&#34;x5c&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> main() {
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// ... the code in this method is untouched...</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> getPemCert(token *jwt.Token) (<span style="">string</span>, <span style="">error</span>) {
</span></span><span style="display:flex;"><span>  cert := <span style="font-style:italic">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>  resp, err := http.Get(os.Getenv(<span style="font-style:italic">&#34;AUTH0_DOMAIN&#34;</span>) + <span style="font-style:italic">&#34;.well-known/jwks.json&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">if</span> err != <span style="font-weight:bold">nil</span> {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> cert, err
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">defer</span> resp.Body.Close()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">var</span> jwks = Jwks{}
</span></span><span style="display:flex;"><span>  err = json.NewDecoder(resp.Body).Decode(&amp;jwks)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">if</span> err != <span style="font-weight:bold">nil</span> {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> cert, err
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  x5c := jwks.Keys[0].X5c
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">for</span> k, v := <span style="font-weight:bold">range</span> x5c {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">if</span> token.Header[<span style="font-style:italic">&#34;kid&#34;</span>] == jwks.Keys[k].Kid {
</span></span><span style="display:flex;"><span>      cert = <span style="font-style:italic">&#34;-----BEGIN CERTIFICATE-----\n&#34;</span> + v + <span style="font-style:italic">&#34;\n-----END CERTIFICATE-----&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">if</span> cert == <span style="font-style:italic">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> cert, errors.New(<span style="font-style:italic">&#34;unable to find appropriate key.&#34;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">return</span> cert, <span style="font-weight:bold">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="using-the-jwt-middleware">Using the JWT Middleware</h3>
<p>Using the middleware is very straight forward. We just pass it as a parameter to our routes definition.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>api.GET(<span style="font-style:italic">&#34;/jokes&#34;</span>, authMiddleware(), JokeHandler)
</span></span><span style="display:flex;"><span>api.POST(<span style="font-style:italic">&#34;/jokes/like/:jokeID&#34;</span>, authMiddleware(), LikeJoke)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>Our <code>main.go</code> file should look like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="font-weight:bold">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">import</span> (
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">&#34;encoding/json&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">&#34;errors&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">&#34;log&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">&#34;net/http&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">&#34;os&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">&#34;strconv&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  jwtmiddleware <span style="font-style:italic">&#34;github.com/auth0/go-jwt-middleware&#34;</span>
</span></span><span style="display:flex;"><span>  jwt <span style="font-style:italic">&#34;github.com/dgrijalva/jwt-go&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">&#34;github.com/gin-gonic/contrib/static&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">type</span> Response <span style="font-weight:bold">struct</span> {
</span></span><span style="display:flex;"><span>  Message <span style="">string</span> <span style="font-style:italic">`json:&#34;message&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">type</span> Jwks <span style="font-weight:bold">struct</span> {
</span></span><span style="display:flex;"><span>  Keys []JSONWebKeys <span style="font-style:italic">`json:&#34;keys&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">type</span> JSONWebKeys <span style="font-weight:bold">struct</span> {
</span></span><span style="display:flex;"><span>  Kty <span style="">string</span>   <span style="font-style:italic">`json:&#34;kty&#34;`</span>
</span></span><span style="display:flex;"><span>  Kid <span style="">string</span>   <span style="font-style:italic">`json:&#34;kid&#34;`</span>
</span></span><span style="display:flex;"><span>  Use <span style="">string</span>   <span style="font-style:italic">`json:&#34;use&#34;`</span>
</span></span><span style="display:flex;"><span>  N   <span style="">string</span>   <span style="font-style:italic">`json:&#34;n&#34;`</span>
</span></span><span style="display:flex;"><span>  E   <span style="">string</span>   <span style="font-style:italic">`json:&#34;e&#34;`</span>
</span></span><span style="display:flex;"><span>  X5c []<span style="">string</span> <span style="font-style:italic">`json:&#34;x5c&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">type</span> Joke <span style="font-weight:bold">struct</span> {
</span></span><span style="display:flex;"><span>  ID    <span style="">int</span>    <span style="font-style:italic">`json:&#34;id&#34; binding:&#34;required&#34;`</span>
</span></span><span style="display:flex;"><span>  Likes <span style="">int</span>    <span style="font-style:italic">`json:&#34;likes&#34;`</span>
</span></span><span style="display:flex;"><span>  Joke  <span style="">string</span> <span style="font-style:italic">`json:&#34;joke&#34; binding:&#34;required&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">/** we&#39;ll create a list of jokes */</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">var</span> jokes = []Joke{
</span></span><span style="display:flex;"><span>  Joke{1, 0, <span style="font-style:italic">&#34;Did you hear about the restaurant on the moon? Great food, no atmosphere.&#34;</span>},
</span></span><span style="display:flex;"><span>  Joke{2, 0, <span style="font-style:italic">&#34;What do you call a fake noodle? An Impasta.&#34;</span>},
</span></span><span style="display:flex;"><span>  Joke{3, 0, <span style="font-style:italic">&#34;How many apples grow on a tree? All of them.&#34;</span>},
</span></span><span style="display:flex;"><span>  Joke{4, 0, <span style="font-style:italic">&#34;Want to hear a joke about paper? Nevermind it&#39;s tearable.&#34;</span>},
</span></span><span style="display:flex;"><span>  Joke{5, 0, <span style="font-style:italic">&#34;I just watched a program about beavers. It was the best dam program I&#39;ve ever seen.&#34;</span>},
</span></span><span style="display:flex;"><span>  Joke{6, 0, <span style="font-style:italic">&#34;Why did the coffee file a police report? It got mugged.&#34;</span>},
</span></span><span style="display:flex;"><span>  Joke{7, 0, <span style="font-style:italic">&#34;How does a penguin build it&#39;s house? Igloos it together.&#34;</span>},
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">var</span> jwtMiddleWare *jwtmiddleware.JWTMiddleware
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> main() {
</span></span><span style="display:flex;"><span>  jwtMiddleware := jwtmiddleware.New(jwtmiddleware.Options{
</span></span><span style="display:flex;"><span>    ValidationKeyGetter: <span style="font-weight:bold">func</span>(token *jwt.Token) (<span style="font-weight:bold">interface</span>{}, <span style="">error</span>) {
</span></span><span style="display:flex;"><span>      aud := os.Getenv(<span style="font-style:italic">&#34;AUTH0_API_AUDIENCE&#34;</span>)
</span></span><span style="display:flex;"><span>      checkAudience := token.Claims.(jwt.MapClaims).VerifyAudience(aud, <span style="font-weight:bold">false</span>)
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">if</span> !checkAudience {
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">return</span> token, errors.New(<span style="font-style:italic">&#34;Invalid audience.&#34;</span>)
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="font-style:italic">// verify iss claim</span>
</span></span><span style="display:flex;"><span>      iss := os.Getenv(<span style="font-style:italic">&#34;AUTH0_DOMAIN&#34;</span>)
</span></span><span style="display:flex;"><span>      checkIss := token.Claims.(jwt.MapClaims).VerifyIssuer(iss, <span style="font-weight:bold">false</span>)
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">if</span> !checkIss {
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">return</span> token, errors.New(<span style="font-style:italic">&#34;Invalid issuer.&#34;</span>)
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      cert, err := getPemCert(token)
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">if</span> err != <span style="font-weight:bold">nil</span> {
</span></span><span style="display:flex;"><span>        log.Fatalf(<span style="font-style:italic">&#34;could not get cert: %+v&#34;</span>, err)
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      result, _ := jwt.ParseRSAPublicKeyFromPEM([]byte(cert))
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">return</span> result, <span style="font-weight:bold">nil</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    SigningMethod: jwt.SigningMethodRS256,
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  jwtMiddleWare = jwtMiddleware
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// Set the router as the default one shipped with Gin</span>
</span></span><span style="display:flex;"><span>  router := gin.Default()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// Serve the frontend</span>
</span></span><span style="display:flex;"><span>  router.Use(static.Serve(<span style="font-style:italic">&#34;/&#34;</span>, static.LocalFile(<span style="font-style:italic">&#34;./views&#34;</span>, <span style="font-weight:bold">true</span>)))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  api := router.Group(<span style="font-style:italic">&#34;/api&#34;</span>)
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    api.GET(<span style="font-style:italic">&#34;/&#34;</span>, <span style="font-weight:bold">func</span>(c *gin.Context) {
</span></span><span style="display:flex;"><span>      c.JSON(http.StatusOK, gin.H{
</span></span><span style="display:flex;"><span>        <span style="font-style:italic">&#34;message&#34;</span>: <span style="font-style:italic">&#34;pong&#34;</span>,
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    api.GET(<span style="font-style:italic">&#34;/jokes&#34;</span>, authMiddleware(), JokeHandler)
</span></span><span style="display:flex;"><span>    api.POST(<span style="font-style:italic">&#34;/jokes/like/:jokeID&#34;</span>, authMiddleware(), LikeJoke)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// Start the app</span>
</span></span><span style="display:flex;"><span>  router.Run(<span style="font-style:italic">&#34;:3000&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> getPemCert(token *jwt.Token) (<span style="">string</span>, <span style="">error</span>) {
</span></span><span style="display:flex;"><span>  cert := <span style="font-style:italic">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>  resp, err := http.Get(os.Getenv(<span style="font-style:italic">&#34;AUTH0_DOMAIN&#34;</span>) + <span style="font-style:italic">&#34;.well-known/jwks.json&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">if</span> err != <span style="font-weight:bold">nil</span> {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> cert, err
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">defer</span> resp.Body.Close()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">var</span> jwks = Jwks{}
</span></span><span style="display:flex;"><span>  err = json.NewDecoder(resp.Body).Decode(&amp;jwks)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">if</span> err != <span style="font-weight:bold">nil</span> {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> cert, err
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  x5c := jwks.Keys[0].X5c
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">for</span> k, v := <span style="font-weight:bold">range</span> x5c {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">if</span> token.Header[<span style="font-style:italic">&#34;kid&#34;</span>] == jwks.Keys[k].Kid {
</span></span><span style="display:flex;"><span>      cert = <span style="font-style:italic">&#34;-----BEGIN CERTIFICATE-----\n&#34;</span> + v + <span style="font-style:italic">&#34;\n-----END CERTIFICATE-----&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">if</span> cert == <span style="font-style:italic">&#34;&#34;</span> {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> cert, errors.New(<span style="font-style:italic">&#34;unable to find appropriate key&#34;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">return</span> cert, <span style="font-weight:bold">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// authMiddleware intercepts the requests, and check for a valid jwt token</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> authMiddleware() gin.HandlerFunc {
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">return</span> <span style="font-weight:bold">func</span>(c *gin.Context) {
</span></span><span style="display:flex;"><span>    <span style="font-style:italic">// Get the client secret key</span>
</span></span><span style="display:flex;"><span>    err := jwtMiddleWare.CheckJWT(c.Writer, c.Request)
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">if</span> err != <span style="font-weight:bold">nil</span> {
</span></span><span style="display:flex;"><span>      <span style="font-style:italic">// Token not found</span>
</span></span><span style="display:flex;"><span>      fmt.Println(err)
</span></span><span style="display:flex;"><span>      c.Abort()
</span></span><span style="display:flex;"><span>      c.Writer.WriteHeader(http.StatusUnauthorized)
</span></span><span style="display:flex;"><span>      c.Writer.Write([]byte(<span style="font-style:italic">&#34;Unauthorized&#34;</span>))
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">return</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-style:italic">// JokeHandler returns a list of jokes available (in memory)</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> JokeHandler(c *gin.Context) {
</span></span><span style="display:flex;"><span>  c.Header(<span style="font-style:italic">&#34;Content-Type&#34;</span>, <span style="font-style:italic">&#34;application/json&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  c.JSON(http.StatusOK, jokes)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">func</span> LikeJoke(c *gin.Context) {
</span></span><span style="display:flex;"><span>  <span style="font-style:italic">// Check joke ID is valid</span>
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold">if</span> jokeid, err := strconv.Atoi(c.Param(<span style="font-style:italic">&#34;jokeID&#34;</span>)); err == <span style="font-weight:bold">nil</span> {
</span></span><span style="display:flex;"><span>    <span style="font-style:italic">// find joke and increment likes</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">for</span> i := 0; i &lt; len(jokes); i++ {
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">if</span> jokes[i].ID == jokeid {
</span></span><span style="display:flex;"><span>        jokes[i].Likes = jokes[i].Likes + 1
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    c.JSON(http.StatusOK, &amp;jokes)
</span></span><span style="display:flex;"><span>  } <span style="font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>    <span style="font-style:italic">// the jokes ID is invalid</span>
</span></span><span style="display:flex;"><span>    c.AbortWithStatus(http.StatusNotFound)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Let&rsquo;s install the <code>jwtmiddleware</code> libraries:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ go get -u github.com/auth0/go-jwt-middleware
</span></span><span style="display:flex;"><span>$ go get -u github.com/dgrijalva/jwt-go
</span></span></code></pre></div><p>Let&rsquo;s source our environment file, and restart our app server:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="">$</span> source .env
</span></span><span style="display:flex;"><span><span style="">$</span> <span style="font-weight:bold">go</span> run main.<span style="font-weight:bold">go</span>
</span></span></code></pre></div><p>Now if we try accessing any of the endpoints, you&rsquo;d be faced with a <code>401 Unauthorized</code> error. That&rsquo;s because we need to send along a token with the request.</p>
<h3 id="login-with-auth0-and-react">Login with Auth0 and React</h3>
<p>Let&rsquo;s implement a login system, so users can login or create accounts, so they have access to our jokes. We&rsquo;ll add to our <code>app.jsx</code> file, the following Auth0 credentials:</p>
<ul>
<li><code>AUTH0_CLIENT_ID</code></li>
<li><code>AUTH0_DOMAIN</code></li>
<li><code>AUTH0_CALLBACK_URL</code> - The URL of your app</li>
<li><code>AUTH0_API_AUDIENCE</code></li>
</ul>
<blockquote>
<p>You can find the <code>AUTH0_CLIENT_ID</code>, <code>AUTH0_DOMAIN</code>, and <code>AUTH0_API_AUDIENCE</code> data from your Auth0 <a href="https://manage.auth0.com/">management dashboard</a>.</p></blockquote>
<p>We need to set a <code>callback</code> which Auth0 redirects to. Navigate to the Clients section in your dashboard, and in the settings, let&rsquo;s set the callback to <code>http://localhost:3000</code>:</p>
<p><img src="https://user-images.githubusercontent.com/9336187/38453893-0cf84032-3a55-11e8-9b03-d26ba1d3e56a.png" alt="auth0-golang-gin-allowed-callbacks"></p>
<p>With the credentials in place, lets update our React components.</p>
<h4 id="app-component">APP component</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="font-weight:bold">const</span> AUTH0_CLIENT_ID = <span style="font-style:italic">&#34;aIAOt9fkMZKrNsSsFqbKj5KTI0ObTDPP&#34;</span>;
</span></span><span style="display:flex;"><span><span style="font-weight:bold">const</span> AUTH0_DOMAIN = <span style="font-style:italic">&#34;hakaselabs.auth0.com&#34;</span>;
</span></span><span style="display:flex;"><span><span style="font-weight:bold">const</span> AUTH0_CALLBACK_URL = location.href;
</span></span><span style="display:flex;"><span><span style="font-weight:bold">const</span> AUTH0_API_AUDIENCE = <span style="font-style:italic">&#34;golang-gin&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">class</span> App <span style="font-weight:bold">extends</span> React.Component {
</span></span><span style="display:flex;"><span>  parseHash() {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.auth0 = <span style="font-weight:bold">new</span> auth0.WebAuth({
</span></span><span style="display:flex;"><span>      domain: AUTH0_DOMAIN,
</span></span><span style="display:flex;"><span>      clientID: AUTH0_CLIENT_ID
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.auth0.parseHash(window.location.hash, (err, authResult) =&gt; {
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">if</span> (err) {
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">return</span> console.log(err);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">if</span> (
</span></span><span style="display:flex;"><span>        authResult !== <span style="font-weight:bold">null</span> &amp;&amp;
</span></span><span style="display:flex;"><span>        authResult.accessToken !== <span style="font-weight:bold">null</span> &amp;&amp;
</span></span><span style="display:flex;"><span>        authResult.idToken !== <span style="font-weight:bold">null</span>
</span></span><span style="display:flex;"><span>      ) {
</span></span><span style="display:flex;"><span>        localStorage.setItem(<span style="font-style:italic">&#34;access_token&#34;</span>, authResult.accessToken);
</span></span><span style="display:flex;"><span>        localStorage.setItem(<span style="font-style:italic">&#34;id_token&#34;</span>, authResult.idToken);
</span></span><span style="display:flex;"><span>        localStorage.setItem(
</span></span><span style="display:flex;"><span>          <span style="font-style:italic">&#34;profile&#34;</span>,
</span></span><span style="display:flex;"><span>          JSON.stringify(authResult.idTokenPayload)
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>        window.location = window.location.href.substr(
</span></span><span style="display:flex;"><span>          0,
</span></span><span style="display:flex;"><span>          window.location.href.indexOf(<span style="font-style:italic">&#34;#&#34;</span>)
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  setup() {
</span></span><span style="display:flex;"><span>    $.ajaxSetup({
</span></span><span style="display:flex;"><span>      beforeSend: (r) =&gt; {
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">if</span> (localStorage.getItem(<span style="font-style:italic">&#34;access_token&#34;</span>)) {
</span></span><span style="display:flex;"><span>          r.setRequestHeader(
</span></span><span style="display:flex;"><span>            <span style="font-style:italic">&#34;Authorization&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="font-style:italic">&#34;Bearer &#34;</span> + localStorage.getItem(<span style="font-style:italic">&#34;access_token&#34;</span>)
</span></span><span style="display:flex;"><span>          );
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  setState() {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">let</span> idToken = localStorage.getItem(<span style="font-style:italic">&#34;id_token&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">if</span> (idToken) {
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">this</span>.loggedIn = <span style="font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>    } <span style="font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">this</span>.loggedIn = <span style="font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  componentWillMount() {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.setup();
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.parseHash();
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.setState();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">if</span> (<span style="font-weight:bold">this</span>.loggedIn) {
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">return</span> &lt;<span style="font-weight:bold">LoggedIn</span> /&gt;;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> &lt;<span style="font-weight:bold">Home</span> /&gt;;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We updated the App component with three component methods (<code>setup</code>, <code>parseHash</code> and <code>setState</code>), and a lifecycle method <code>componentWillMount</code>. The <code>parseHash</code> method, initializes the <code>auth0</code> <code>webAuth</code> client, and parses the hash to a more readable format, saving them to localSt.  to show the lock screen, capture and store the user token and add the correct authorization header to any requests to our API</p>
<h4 id="home-component">Home component</h4>
<p>Our Home component will be updated, we&rsquo;ll add the functionality for the <code>authenticate</code> method, which will trigger the hosted lock screen to display, and allow our users login or signup.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="font-weight:bold">class</span> Home <span style="font-weight:bold">extends</span> React.Component {
</span></span><span style="display:flex;"><span>  constructor(props) {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">super</span>(props);
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.authenticate = <span style="font-weight:bold">this</span>.authenticate.bind(<span style="font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  authenticate() {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.WebAuth = <span style="font-weight:bold">new</span> auth0.WebAuth({
</span></span><span style="display:flex;"><span>      domain: AUTH0_DOMAIN,
</span></span><span style="display:flex;"><span>      clientID: AUTH0_CLIENT_ID,
</span></span><span style="display:flex;"><span>      scope: <span style="font-style:italic">&#34;openid profile&#34;</span>,
</span></span><span style="display:flex;"><span>      audience: AUTH0_API_AUDIENCE,
</span></span><span style="display:flex;"><span>      responseType: <span style="font-style:italic">&#34;token id_token&#34;</span>,
</span></span><span style="display:flex;"><span>      redirectUri: AUTH0_CALLBACK_URL
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.WebAuth.authorize();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>      &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;container&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;row&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;col-xs-8 col-xs-offset-2 jumbotron text-center&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="font-weight:bold">h1</span>&gt;Jokeish&lt;/<span style="font-weight:bold">h1</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="font-weight:bold">p</span>&gt;A load <span style="font-weight:bold">of</span> Dad jokes XD&lt;/<span style="font-weight:bold">p</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="font-weight:bold">p</span>&gt;Sign <span style="font-weight:bold">in</span> to get access &lt;/<span style="font-weight:bold">p</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="font-weight:bold">a</span>
</span></span><span style="display:flex;"><span>              onClick={<span style="font-weight:bold">this</span>.authenticate}
</span></span><span style="display:flex;"><span>              className=<span style="font-style:italic">&#34;btn btn-primary btn-lg btn-login btn-block&#34;</span>
</span></span><span style="display:flex;"><span>            &gt;
</span></span><span style="display:flex;"><span>              Sign In
</span></span><span style="display:flex;"><span>            &lt;/<span style="font-weight:bold">a</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="loggedin-component-1">LoggedIn Component</h4>
<p>We will update the <code>LoggedIn</code> component to communicate with our API, and pull all jokes, pass each joke as a <code>prop</code> to the <code>Joke</code> component, which renders a bootstrap pannel. Let&rsquo;s write those:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="font-weight:bold">class</span> LoggedIn <span style="font-weight:bold">extends</span> React.Component {
</span></span><span style="display:flex;"><span>  constructor(props) {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">super</span>(props);
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.state = {
</span></span><span style="display:flex;"><span>      jokes: []
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.serverRequest = <span style="font-weight:bold">this</span>.serverRequest.bind(<span style="font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.logout = <span style="font-weight:bold">this</span>.logout.bind(<span style="font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  logout() {
</span></span><span style="display:flex;"><span>    localStorage.removeItem(<span style="font-style:italic">&#34;id_token&#34;</span>);
</span></span><span style="display:flex;"><span>    localStorage.removeItem(<span style="font-style:italic">&#34;access_token&#34;</span>);
</span></span><span style="display:flex;"><span>    localStorage.removeItem(<span style="font-style:italic">&#34;profile&#34;</span>);
</span></span><span style="display:flex;"><span>    location.reload();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  serverRequest() {
</span></span><span style="display:flex;"><span>    $.get(<span style="font-style:italic">&#34;http://localhost:3000/api/jokes&#34;</span>, res =&gt; {
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold">this</span>.setState({
</span></span><span style="display:flex;"><span>        jokes: res
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  componentDidMount() {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.serverRequest();
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>      &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;container&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="font-weight:bold">br</span> /&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="font-weight:bold">span</span> className=<span style="font-style:italic">&#34;pull-right&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">a</span> onClick={<span style="font-weight:bold">this</span>.logout}&gt;Log out&lt;/<span style="font-weight:bold">a</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="font-weight:bold">span</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="font-weight:bold">h2</span>&gt;Jokeish&lt;/<span style="font-weight:bold">h2</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="font-weight:bold">p</span>&gt;Let<span style="">&#39;</span>s feed you <span style="font-weight:bold">with</span> some funny Jokes!!!&lt;/<span style="font-weight:bold">p</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;row&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;container&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            {<span style="font-weight:bold">this</span>.state.jokes.map(<span style="font-weight:bold">function</span>(joke, i) {
</span></span><span style="display:flex;"><span>              <span style="font-weight:bold">return</span> &lt;<span style="font-weight:bold">Joke</span> key={i} joke={joke} /&gt;;
</span></span><span style="display:flex;"><span>            })}
</span></span><span style="display:flex;"><span>          &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="joke-component">Joke Component</h4>
<p>We&rsquo;ll also update the <code>Joke</code> component to format each Joke item passed to it from the Parent compoent (<code>LoggedIn</code>), and add a <code>like</code> method, which will increment the likes of a Joke.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span><span style="font-weight:bold">class</span> Joke <span style="font-weight:bold">extends</span> React.Component {
</span></span><span style="display:flex;"><span>  constructor(props) {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">super</span>(props);
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.state = {
</span></span><span style="display:flex;"><span>      liked: <span style="font-style:italic">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>      jokes: []
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.like = <span style="font-weight:bold">this</span>.like.bind(<span style="font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.serverRequest = <span style="font-weight:bold">this</span>.serverRequest.bind(<span style="font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  like() {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">let</span> joke = <span style="font-weight:bold">this</span>.props.joke;
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">this</span>.serverRequest(joke);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  serverRequest(joke) {
</span></span><span style="display:flex;"><span>    $.post(
</span></span><span style="display:flex;"><span>      <span style="font-style:italic">&#34;http://localhost:3000/api/jokes/like/&#34;</span> + joke.id,
</span></span><span style="display:flex;"><span>      { like: 1 },
</span></span><span style="display:flex;"><span>      res =&gt; {
</span></span><span style="display:flex;"><span>        console.log(<span style="font-style:italic">&#34;res... &#34;</span>, res);
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">this</span>.setState({ liked: <span style="font-style:italic">&#34;Liked!&#34;</span>, jokes: res });
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">this</span>.props.jokes = res;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>      &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;col-xs-4&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;panel panel-default&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;panel-heading&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            <span style="">#</span>{<span style="font-weight:bold">this</span>.props.joke.id}{<span style="font-style:italic">&#34; &#34;</span>}
</span></span><span style="display:flex;"><span>            &lt;<span style="font-weight:bold">span</span> className=<span style="font-style:italic">&#34;pull-right&#34;</span>&gt;{<span style="font-weight:bold">this</span>.state.liked}&lt;/<span style="font-weight:bold">span</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;panel-body&#34;</span>&gt;{<span style="font-weight:bold">this</span>.props.joke.joke}&lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="font-weight:bold">div</span> className=<span style="font-style:italic">&#34;panel-footer&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            {<span style="font-weight:bold">this</span>.props.joke.likes} Likes &amp;nbsp;
</span></span><span style="display:flex;"><span>            &lt;<span style="font-weight:bold">a</span> onClick={<span style="font-weight:bold">this</span>.like} className=<span style="font-style:italic">&#34;btn btn-default&#34;</span>&gt;
</span></span><span style="display:flex;"><span>              &lt;<span style="font-weight:bold">span</span> className=<span style="font-style:italic">&#34;glyphicon glyphicon-thumbs-up&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="font-weight:bold">a</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="font-weight:bold">div</span>&gt;
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="putting-it-all-together">Putting it all together</h3>
<p>With the UI and API complete, we can test our app. We&rsquo;ll start of by booting our server <code>source .env &amp;&amp; go run main.go</code>, and the navigate to <code>http://localhost:3000</code> from any browser, you should see the <code>Home</code> component with a signin button. Clicking on the signin button will redirect to a hosted Lock page, create an account or login, to continue using the application.</p>
<p><img src="https://user-images.githubusercontent.com/9336187/38368612-a452879a-38dd-11e8-8a63-5cc7530fc9bd.png" alt="golang-gin-home-component">
<em>Home</em></p>
<p><img src="https://user-images.githubusercontent.com/9336187/38369278-4685f35c-38df-11e8-97ac-98b2b9d07bab.png" alt="golang-gin-login-screen">
<em>Auth0 Hosted Lock Screen</em></p>
<p><img src="https://user-images.githubusercontent.com/9336187/38371873-6ccabb50-38e5-11e8-9b67-b97cc2ce98c6.png" alt="golang-gin-demo-shot">
<em>LoggedIn App view</em></p>
<h3 id="conclusion">Conclusion</h3>
<p>Congrats! You have learned how to build an application and an API with Go and the GIN framework.</p>
<p>This tutorial is designed to help you get started on building and adding authentication to a Golang app with the GIN framework.</p>
<p>Did I miss something important? Let me know of it in the comments.</p>

  </div>

  
  <div class="mt-8 pt-4 border-t border-gray-200">
    <h3 class="text-lg font-bold mb-2">Tags:</h3>
    <div class="flex flex-wrap">
      
        <a href="/tags/go" class="tag">go</a>
      
        <a href="/tags/gin-gonic" class="tag">gin-gonic</a>
      
        <a href="/tags/react" class="tag">react</a>
      
        <a href="/tags/golang" class="tag">golang</a>
      
    </div>
  </div>
  
</article>

      </main>
      
      <footer class="mt-8 pt-8 border-t border-gray-200">
  <div class="flex flex-wrap justify-between items-center">
    <div class="font-bold">
      <a class="underline mr-4" href="/blog">/blog</a>
      <a class="underline mr-4" href="https://x.com/codehakase">/X</a>
      <a class="underline mr-4" href="https://linkedin.com/in/codehakase">/linkedin</a>
      <a class="underline" href="https://github.com/codehakase">/github</a>
    </div>
    <div class="mt-4 md:mt-0 text-sm">
      &copy; 2025 Francis Sunday
    </div>
  </div>
</footer> 
    </div>
  </body>
</html> 